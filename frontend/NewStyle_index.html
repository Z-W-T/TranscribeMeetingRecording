<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ä¼šè®®è½¬å½• Â· å‰ç«¯</title>
    <style>
      :root {
        --primary: #FF4B4B;
        --primary-light: #FF9A9A;
        --primary-dark: #D32F2F;
        --secondary: #1E88E5;
        --bg: #f8f9fa;
        --card: #ffffff;
        --text: #24292e;
        --text-light: #6a737d;
        --border: #e1e4e8;
        --success: #28a745;
        --warning: #ffd33d;
        --error: #d73a49;
        --processing: #0366d6;
        --sidebar-width: 280px;
      }
      
      * { 
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
        background-color: var(--bg);
        color: var(--text);
        line-height: 1.6;
        display: flex;
        min-height: 100vh;
      }
      
      /* ä¾§è¾¹æ æ ·å¼ */
      .sidebar {
        width: var(--sidebar-width);
        background: var(--card);
        border-right: 1px solid var(--border);
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
      }
      
      .logo {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--border);
      }
      
      .logo-icon {
        width: 40px;
        height: 40px;
        background: var(--primary);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 1.2rem;
      }
      
      .logo-text {
        font-weight: 600;
        font-size: 1.1rem;
      }
      
      .sidebar-section {
        margin-bottom: 2rem;
      }
      
      .sidebar-title {
        font-size: 0.9rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: var(--text-light);
        margin-bottom: 1rem;
      }
      
      .task-status {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      
      .status-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem;
        background: #fafbfc;
        border-radius: 6px;
        border-left: 4px solid var(--border);
        transition: all 0.3s ease;
      }
      
      .status-item.pending {
        border-left-color: var(--processing);
        background: #f1f8ff;
      }
      
      .status-item.active {
        border-left-color: var(--processing);
        background: #f1f8ff;
      }
      
      .status-item.done {
        border-left-color: var(--success);
        background: #f0fff4;
      }
      
      .status-item.error {
        border-left-color: var(--error);
        background: #ffeef0;
      }
      
      .status-icon {
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background: var(--border);
        color: white;
        font-size: 0.8rem;
        transition: all 0.3s ease;
      }
      
      .status-item.pending .status-icon {
        background: var(--processing);
      }
      
      .status-item.active .status-icon {
        background: var(--processing);
      }
      
      .status-item.done .status-icon {
        background: var(--success);
      }
      
      .status-item.error .status-icon {
        background: var(--error);
      }
      
      .status-text {
        flex: 1;
      }
      
      .status-label {
        font-size: 0.85rem;
        font-weight: 500;
      }
      
      .status-desc {
        font-size: 0.75rem;
        color: var(--text-light);
      }
      
      .progress-container {
        width: 100%;
        height: 6px;
        background: var(--border);
        border-radius: 3px;
        margin-top: 0.5rem;
        overflow: hidden;
      }
      
      .progress-bar {
        height: 100%;
        background: var(--primary);
        border-radius: 3px;
        transition: width 0.5s ease;
        width: 0%;
      }
      
      /* ä¸»å†…å®¹åŒºæ ·å¼ */
      .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      
      .tabs {
        display: flex;
        background: var(--card);
        border-bottom: 1px solid var(--border);
        padding: 0 1.5rem;
      }
      
      .tab {
        padding: 1rem 1.5rem;
        background: none;
        border: none;
        font-size: 0.95rem;
        font-weight: 500;
        color: var(--text-light);
        cursor: pointer;
        position: relative;
        transition: all 0.2s;
      }
      
      .tab:hover {
        color: var(--text);
      }
      
      .tab.active {
        color: var(--primary);
        font-weight: 600;
      }
      
      .tab.active::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--primary);
      }
      
      .tab-content {
        flex: 1;
        padding: 2rem;
        overflow-y: auto;
      }
      
      .tab-pane {
        display: none;
        max-width: 900px;
      }
      
      .tab-pane.active {
        display: block;
      }
      
      /* å¡ç‰‡æ ·å¼ */
      .card {
        background: var(--card);
        border-radius: 6px;
        box-shadow: 0 1px 3px rgba(27, 31, 35, 0.1);
        margin-bottom: 1.5rem;
        overflow: hidden;
      }
      
      .card-header {
        padding: 1.25rem 1.5rem;
        border-bottom: 1px solid var(--border);
        font-weight: 600;
      }
      
      .card-body {
        padding: 1.5rem;
      }
      
      /* æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ */
      .drop-area {
        border: 2px dashed var(--border);
        border-radius: 6px;
        padding: 2rem;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s;
        background: #fafbfc;
      }
      
      .drop-area:hover, .drop-area.dragover {
        border-color: var(--primary);
        background: #fff5f5;
      }
      
      .drop-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: var(--text-light);
      }
      
      .file-info {
        margin-top: 1rem;
        padding: 1rem;
        background: #f6f8fa;
        border-radius: 6px;
        text-align: left;
      }
      
      .file-name {
        font-weight: 500;
        margin-bottom: 0.25rem;
      }
      
      .file-size {
        font-size: 0.85rem;
        color: var(--text-light);
      }
      
      /* è¡¨å•å…ƒç´  */
      .form-group {
        margin-bottom: 1.5rem;
      }
      
      .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
      }
      
      .form-control {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--border);
        border-radius: 6px;
        font-size: 0.95rem;
        transition: border-color 0.2s;
      }
      
      .form-control:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(255, 75, 75, 0.1);
      }
      
      /* é€‰é¡¹åˆ‡æ¢ */
      .options-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
      }
      
      .option-toggle {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem;
        border: 1px solid var(--border);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .option-toggle:hover {
        border-color: var(--primary-light);
      }
      
      .option-toggle.active {
        border-color: var(--primary);
        background: #fff5f5;
      }
      
      .option-toggle.required {
        border-color: var(--primary);
        background: #fff5f5;
        cursor: not-allowed;
      }
      
      .option-toggle.required:hover {
        border-color: var(--primary);
      }
      
      .option-icon {
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        background: var(--border);
        color: var(--text);
      }
      
      .option-toggle.active .option-icon {
        background: var(--primary);
        color: white;
      }
      
      .option-toggle.required .option-icon {
        background: var(--primary);
        color: white;
      }
      
      .option-text {
        flex: 1;
      }
      
      .option-label {
        font-weight: 500;
        font-size: 0.9rem;
      }
      
      .option-desc {
        font-size: 0.8rem;
        color: var(--text-light);
      }
      
      /* æŒ‰é’® */
      .btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 6px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .btn:hover:not(:disabled) {
        background: var(--primary-dark);
        transform: translateY(-1px);
      }
      
      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }
      
      .btn-block {
        display: block;
        width: 100%;
        text-align: center;
        justify-content: center;
      }
      
      /* å¤„ç†è¿‡ç¨‹æ ·å¼ */
      .process-log {
        background: #f6f8fa;
        border-radius: 6px;
        padding: 1rem;
        max-height: 400px;
        overflow-y: auto;
        font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        font-size: 0.85rem;
      }
      
      .log-entry {
        margin-bottom: 0.5rem;
        padding: 0.5rem;
        border-radius: 3px;
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
      }
      
      .log-time {
        color: var(--text-light);
        font-size: 0.75rem;
        min-width: 80px;
      }
      
      .log-message {
        flex: 1;
      }
      
      .log-success {
        background: #dcffe4;
        border-left: 3px solid var(--success);
      }
      
      .log-error {
        background: #ffdce0;
        border-left: 3px solid var(--error);
      }
      
      .log-info {
        background: #dbedff;
        border-left: 3px solid var(--processing);
      }
      
      .log-warning {
        background: #fff5b1;
        border-left: 3px solid var(--warning);
      }
      
      /* è¾“å‡ºæ ·å¼ - Typoraé£æ ¼ */
      .output-section {
        margin-bottom: 2rem;
      }
      
      .output-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 1rem;
      }
      
      .output-title {
        font-weight: 600;
        font-size: 1.1rem;
      }
      
      .output-content {
        background: var(--card);
        border-radius: 6px;
        padding: 2rem;
        border: 1px solid var(--border);
        max-height: 400px;
        overflow-y: auto;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
        line-height: 1.7;
      }
      
      /* Typoraæ ·å¼æ¸²æŸ“ */
      .typora-content {
        font-size: 16px;
        color: #24292e;
      }
      
      .typora-content h1,
      .typora-content h2,
      .typora-content h3,
      .typora-content h4,
      .typora-content h5,
      .typora-content h6 {
        margin-top: 24px;
        margin-bottom: 16px;
        font-weight: 600;
        line-height: 1.25;
      }
      
      .typora-content h1 {
        font-size: 2em;
        padding-bottom: 0.3em;
        border-bottom: 1px solid #eaecef;
      }
      
      .typora-content h2 {
        font-size: 1.5em;
        padding-bottom: 0.3em;
        border-bottom: 1px solid #eaecef;
      }
      
      .typora-content h3 {
        font-size: 1.25em;
      }
      
      .typora-content h4 {
        font-size: 1em;
      }
      
      .typora-content p {
        margin-top: 0;
        margin-bottom: 16px;
      }
      
      .typora-content ul,
      .typora-content ol {
        padding-left: 2em;
        margin-top: 0;
        margin-bottom: 16px;
      }
      
      .typora-content li {
        margin-bottom: 0.25em;
      }
      
      .typora-content ul ul,
      .typora-content ul ol,
      .typora-content ol ol,
      .typora-content ol ul {
        margin-top: 0;
        margin-bottom: 0;
      }
      
      .typora-content blockquote {
        padding: 0 1em;
        color: #6a737d;
        border-left: 0.25em solid #dfe2e5;
        margin: 0 0 16px 0;
      }
      
      .typora-content table {
        border-spacing: 0;
        border-collapse: collapse;
        margin-bottom: 16px;
        width: 100%;
      }
      
      .typora-content table th,
      .typora-content table td {
        padding: 6px 13px;
        border: 1px solid #dfe2e5;
      }
      
      .typora-content table th {
        font-weight: 600;
        background-color: #f6f8fa;
      }
      
      .typora-content table tr:nth-child(2n) {
        background-color: #f6f8fa;
      }
      
      .typora-content code {
        padding: 0.2em 0.4em;
        margin: 0;
        font-size: 85%;
        background-color: rgba(27, 31, 35, 0.05);
        border-radius: 3px;
        font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
      }
      
      .typora-content pre {
        padding: 16px;
        overflow: auto;
        font-size: 85%;
        line-height: 1.45;
        background-color: #f6f8fa;
        border-radius: 3px;
        margin-bottom: 16px;
      }
      
      .typora-content pre code {
        padding: 0;
        background: transparent;
        border-radius: 0;
      }
      
      .typora-content hr {
        height: 0.25em;
        padding: 0;
        margin: 24px 0;
        background-color: #e1e4e8;
        border: 0;
      }
      
      .typora-content strong {
        font-weight: 600;
      }
      
      .typora-content em {
        font-style: italic;
      }
      
      .download-buttons {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
        margin-top: 1rem;
      }
      
      .download-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 6px;
        text-decoration: none;
        color: var(--text);
        font-size: 0.85rem;
        transition: all 0.2s;
      }
      
      .download-btn:hover {
        background: #f6f8fa;
        border-color: var(--primary-light);
      }
      
      /* éšè—å…ƒç´  */
      .hidden {
        display: none;
      }
      
      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        body {
          flex-direction: column;
        }
        
        .sidebar {
          width: 100%;
          border-right: none;
          border-bottom: 1px solid var(--border);
        }
        
        .tabs {
          overflow-x: auto;
        }
        
        .options-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <!-- ä¾§è¾¹æ  -->
    <div class="sidebar">
      <div class="logo">
        <div class="logo-icon">M</div>
        <div class="logo-text">ä¼šè®®è½¬å½•</div>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-title">å¤„ç†çŠ¶æ€</div>
        <div class="task-status">
          <div class="status-item active" id="status-upload">
            <div class="status-icon">1</div>
            <div class="status-text">
              <div class="status-label">æ–‡ä»¶ä¸Šä¼ </div>
              <div class="status-desc">ç­‰å¾…ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶</div>
            </div>
          </div>
          
          <div class="status-item" id="status-transcribe">
            <div class="status-icon">2</div>
            <div class="status-text">
              <div class="status-label">è¯­éŸ³è½¬å½•</div>
              <div class="status-desc">å°†éŸ³é¢‘è½¬æ¢ä¸ºæ–‡æœ¬</div>
            </div>
          </div>
          
          <div class="status-item" id="status-summary">
            <div class="status-icon">3</div>
            <div class="status-text">
              <div class="status-label">ç”Ÿæˆæ‘˜è¦</div>
              <div class="status-desc">æå–ä¼šè®®æ ¸å¿ƒå†…å®¹</div>
            </div>
          </div>
          
          <div class="status-item" id="status-keypoints">
            <div class="status-icon">4</div>
            <div class="status-text">
              <div class="status-label">æå–è¦ç‚¹</div>
              <div class="status-desc">è¯†åˆ«å…³é”®è®¨è®ºç‚¹</div>
            </div>
          </div>
          
          <div class="status-item" id="status-terms">
            <div class="status-icon">5</div>
            <div class="status-text">
              <div class="status-label">æœ¯è¯­è§£é‡Š</div>
              <div class="status-desc">è§£æä¸“ä¸šæœ¯è¯­</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-title">å¤„ç†è¿›åº¦</div>
        <div class="progress-container">
          <div class="progress-bar" id="sidebar-progress-bar"></div>
        </div>
        <div class="status-desc" id="progress-text" style="margin-top: 0.5rem;">0%</div>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-title">å½“å‰æ–‡ä»¶</div>
        <div class="status-desc" id="current-file">æœªé€‰æ‹©æ–‡ä»¶</div>
      </div>
    </div>
    
    <!-- ä¸»å†…å®¹åŒº -->
    <div class="main-content">
      <!-- é€‰é¡¹å¡å¯¼èˆª -->
      <div class="tabs">
        <button class="tab active" data-tab="input">è¾“å…¥</button>
        <button class="tab" data-tab="process">å¤„ç†è¿‡ç¨‹</button>
        <button class="tab" data-tab="output">è¾“å‡º</button>
      </div>
      
      <!-- é€‰é¡¹å¡å†…å®¹ -->
      <div class="tab-content">
        <!-- è¾“å…¥é€‰é¡¹å¡ -->
        <div id="input-tab" class="tab-pane active">
          <div class="card">
            <div class="card-header">ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶</div>
            <div class="card-body">
              <div id="drop-area" class="drop-area">
                <div class="drop-icon">ğŸ¤</div>
                <h3>æ‹–æ”¾æˆ–ç‚¹å‡»ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶</h3>
                <p>æ”¯æŒ MP3ã€WAV ç­‰å¸¸è§éŸ³é¢‘æ ¼å¼</p>
                <input type="file" id="file-input" class="hidden" accept="audio/*" />
                <div id="file-info" class="file-info hidden">
                  <div class="file-name" id="file-name"></div>
                  <div class="file-size" id="file-size"></div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">ä¼šè®®ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰</div>
            <div class="card-body">
              <div class="form-group">
                <label class="form-label" for="attendees">å‚ä¼šäººå‘˜</label>
                <input type="text" id="attendees" class="form-control" placeholder="è¾“å…¥å‚ä¼šäººå‘˜ï¼Œç”¨é€—å·åˆ†éš”" />
              </div>
              
              <div class="form-group">
                <label class="form-label" for="meeting-topic">ä¼šè®®ä¸»é¢˜</label>
                <input type="text" id="meeting-topic" class="form-control" placeholder="è¾“å…¥ä¼šè®®ä¸»é¢˜æˆ–è®®é¢˜" />
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">å¤„ç†é€‰é¡¹</div>
            <div class="card-body">
              <div class="options-grid">
                <!-- å®Œæ•´è½¬å½• - å¿…éœ€åŠŸèƒ½ï¼Œä¸å¯å–æ¶ˆ -->
                <div class="option-toggle required" id="toggle-minutes">
                  <div class="option-icon">ğŸ“„</div>
                  <div class="option-text">
                    <div class="option-label">å®Œæ•´è½¬å½•</div>
                    <div class="option-desc">ç”Ÿæˆå®Œæ•´ä¼šè®®è®°å½•ï¼ˆå¿…éœ€ï¼‰</div>
                  </div>
                </div>
                
                <div class="option-toggle active" id="toggle-summary">
                  <div class="option-icon">ğŸ“</div>
                  <div class="option-text">
                    <div class="option-label">ç”Ÿæˆæ‘˜è¦</div>
                    <div class="option-desc">ä¼šè®®æ ¸å¿ƒå†…å®¹æ€»ç»“</div>
                  </div>
                </div>
                
                <div class="option-toggle" id="toggle-keypoints">
                  <div class="option-icon">ğŸ”</div>
                  <div class="option-text">
                    <div class="option-label">å…³é”®è¦ç‚¹</div>
                    <div class="option-desc">æå–é‡è¦è®¨è®ºç‚¹</div>
                  </div>
                </div>
                
                <div class="option-toggle" id="toggle-terms">
                  <div class="option-icon">ğŸ’¡</div>
                  <div class="option-text">
                    <div class="option-label">æœ¯è¯­è§£é‡Š</div>
                    <div class="option-desc">è§£æä¸“ä¸šæœ¯è¯­</div>
                  </div>
                </div>
              </div>
              
              <button id="submit-btn" class="btn btn-block">å¼€å§‹å¤„ç†</button>
            </div>
          </div>
        </div>
        
        <!-- å¤„ç†è¿‡ç¨‹é€‰é¡¹å¡ -->
        <div id="process-tab" class="tab-pane">
          <div class="card">
            <div class="card-header">å¤„ç†æ—¥å¿—</div>
            <div class="card-body">
              <div id="process-log" class="process-log">
                <div class="log-entry log-info">
                  <div class="log-time" id="current-time"></div>
                  <div class="log-message">ç­‰å¾…å¼€å§‹å¤„ç†...</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- è¾“å‡ºé€‰é¡¹å¡ -->
        <div id="output-tab" class="tab-pane">
          <div class="output-section">
            <div class="output-header">
              <div class="output-title">å®Œæ•´è½¬å½•</div>
              <div id="transcript-status" class="status-desc">ç­‰å¾…å¤„ç†</div>
            </div>
            <div id="transcript-content" class="output-content typora-content">ï¼ˆç­‰å¾…å¤„ç†ç»“æœï¼‰</div>
            <div id="transcript-downloads" class="download-buttons"></div>
          </div>
          
          <div class="output-section">
            <div class="output-header">
              <div class="output-title">ä¼šè®®æ‘˜è¦</div>
              <div id="summary-status" class="status-desc">ç­‰å¾…å¤„ç†</div>
            </div>
            <div id="summary-content" class="output-content typora-content">ï¼ˆç­‰å¾…å¤„ç†ç»“æœï¼‰</div>
            <div id="summary-downloads" class="download-buttons"></div>
          </div>
          
          <div class="output-section">
            <div class="output-header">
              <div class="output-title">å…³é”®è¦ç‚¹</div>
              <div id="keypoints-status" class="status-desc">æœªé€‰æ‹©æ­¤é€‰é¡¹</div>
            </div>
            <div id="keypoints-content" class="output-content typora-content">ï¼ˆå¦‚é€‰æ‹©"å…³é”®è¦ç‚¹"é€‰é¡¹ï¼Œæ­¤å¤„å°†æ˜¾ç¤ºæå–ç»“æœï¼‰</div>
            <div id="keypoints-downloads" class="download-buttons"></div>
          </div>
          
          <div class="output-section">
            <div class="output-header">
              <div class="output-title">ä¸“ä¸šæœ¯è¯­</div>
              <div id="terms-status" class="status-desc">æœªé€‰æ‹©æ­¤é€‰é¡¹</div>
            </div>
            <div id="terms-content" class="output-content typora-content">ï¼ˆå¦‚é€‰æ‹©"æœ¯è¯­è§£é‡Š"é€‰é¡¹ï¼Œæ­¤å¤„å°†æ˜¾ç¤ºè§£æç»“æœï¼‰</div>
            <div id="terms-downloads" class="download-buttons"></div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Typoraé£æ ¼çš„Markdownæ¸²æŸ“å™¨
class TyporaRenderer {
    static render(text) {
        if (!text) return '';
        
        let html = this.escapeHtml(text);
        
        // å¤„ç†é¡ºåºå¾ˆé‡è¦
        html = this.processCodeBlocks(html);
        html = this.processBlockElements(html);
        html = this.processInlineElements(html);
        html = this.cleanupAndFormat(html);
        
        return html;
    }
    
    static escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
    
    static processCodeBlocks(text) {
        let html = text.replace(/```([\s\S]*?)```/g, (match, code) => {
            return `<pre><code>${this.escapeHtml(code.trim())}</code></pre>`;
        });
        
        html = html.replace(/`([^`\n]+?)`/g, '<code>$1</code>');
        return html;
    }
    
    static processBlockElements(text) {
        const lines = text.split('\n');
        let result = [];
        let listStack = []; // ç”¨äºè·Ÿè¸ªåµŒå¥—åˆ—è¡¨
        let currentContext = { type: 'paragraph', content: [] };
        
        const closeContext = () => {
            if (currentContext.content.length > 0) {
                const content = currentContext.content.join('\n').trim();
                if (content) {
                    result.push(this.formatBlock(currentContext.type, content));
                }
                currentContext.content = [];
            }
        };
        
        const closeAllLists = () => {
            while (listStack.length > 0) {
                const list = listStack.pop();
                result.push(`</${list.type}>`);
            }
        };
        
        for (let i = 0; i < lines.length; i++) {
            const line = lines[i];
            const trimmedLine = line.trim();
            
            if (!trimmedLine) {
                closeContext();
                closeAllLists();
                result.push('');
                continue;
            }
            
            // æ£€æŸ¥æ˜¯å¦ä¸ºåˆ—è¡¨é¡¹
            const listItem = this.parseListItem(line);
            if (listItem) {
                closeContext(); // å…³é—­æ®µè½ä¸Šä¸‹æ–‡
                
                const indentLevel = this.getIndentLevel(line);
                const listType = listItem.type === 'ol' ? 'ol' : 'ul';
                
                // å¤„ç†åˆ—è¡¨åµŒå¥—
                while (listStack.length > 0 && listStack[listStack.length - 1].indentLevel >= indentLevel) {
                    const closedList = listStack.pop();
                    result.push(`</${closedList.type}>`);
                }
                
                // å¼€å¯æ–°åˆ—è¡¨ï¼ˆå¦‚æœéœ€è¦ï¼‰
                if (listStack.length === 0 || listStack[listStack.length - 1].indentLevel < indentLevel) {
                    result.push(`<${listType}>`);
                    listStack.push({ type: listType, indentLevel: indentLevel });
                }
                
                // æ·»åŠ åˆ—è¡¨é¡¹
                result.push(`<li>${listItem.content}</li>`);
                continue;
            }
            
            // éåˆ—è¡¨é¡¹
            closeAllLists();
            
            const blockType = this.detectBlockType(line);
            if (blockType !== currentContext.type) {
                closeContext();
                currentContext.type = blockType;
            }
            
            currentContext.content.push(line);
        }
        
        closeContext();
        closeAllLists();
        return result.join('\n');
    }
    
    static detectBlockType(line) {
        const trimmedLine = line.trim();
        
        // æ ‡é¢˜æ£€æµ‹
        const headingMatch = trimmedLine.match(/^(#{1,6})\s+(.*)$/);
        if (headingMatch) {
            return `h${headingMatch[1].length}`;
        }
        
        // æ°´å¹³çº¿
        if (trimmedLine.match(/^[-*_]{3,}$/)) {
            return 'hr';
        }
        
        // å—å¼•ç”¨
        if (trimmedLine.startsWith('>')) {
            return 'blockquote';
        }
        
        // è¡¨æ ¼æ£€æµ‹
        if (trimmedLine.startsWith('|') && trimmedLine.endsWith('|')) {
            return 'table';
        }
        
        return 'paragraph';
    }
    
    static getIndentLevel(line) {
        const indentMatch = line.match(/^(\s*)/);
        return indentMatch ? Math.floor(indentMatch[1].length / 4) : 0;
    }
    
    static isListItem(line) {
        return !!line.trim().match(/^([-*+]|\d+\.)\s+/);
    }
    
    static parseListItem(line) {
        const trimmedLine = line.trim();
        const unorderedMatch = trimmedLine.match(/^([-*+])\s+(.*)$/);
        if (unorderedMatch) {
            return { type: 'ul', content: unorderedMatch[2] };
        }
        
        const orderedMatch = trimmedLine.match(/^(\d+)\.\s+(.*)$/);
        if (orderedMatch) {
            return { type: 'ol', content: orderedMatch[2] };
        }
        
        return null;
    }
    
    static formatBlock(type, content) {
        switch (type) {
            case 'paragraph':
                return this.formatParagraph(content);
                
            case 'hr':
                return '<hr>';
                
            case 'blockquote':
                return this.formatBlockquote(content);
                
            case 'table':
                return this.formatTable(content);
                
            default:
                if (type.startsWith('h')) {
                    const level = type.substring(1);
                    const text = content.replace(/^#{1,6}\s+/, '');
                    return `<h${level}>${text}</h${level}>`;
                }
                return this.formatParagraph(content);
        }
    }
    
    static formatParagraph(content) {
        const lines = content.split('\n');
        if (lines.length === 1) {
            return `<p>${content}</p>`;
        }
        
        const formattedContent = lines.map(line => {
            if (line.trim() === '') return '';
            return line;
        }).filter(line => line !== '').join('<br>');
        
        return `<p>${formattedContent}</p>`;
    }
    
    static formatBlockquote(content) {
        const quoteContent = content.split('\n')
            .map(line => line.replace(/^>\s*/, ''))
            .join('\n')
            .trim();
        return `<blockquote>${quoteContent}</blockquote>`;
    }
    
    static formatTable(content) {
        const lines = content.split('\n').filter(line => line.trim());
        if (lines.length === 0) return '';
        
        let tableHtml = '<table>';
        let inHeader = true;
        
        for (let i = 0; i < lines.length; i++) {
            const line = lines[i].trim();
            if (!line.startsWith('|') || !line.endsWith('|')) continue;
            
            const cells = line.split('|')
                .map(cell => cell.trim())
                .filter(cell => cell);
            
            if (cells.every(cell => /^:?-+:?$/.test(cell))) {
                inHeader = false;
                continue;
            }
            
            const tag = inHeader && i === 0 ? 'th' : 'td';
            const rowHtml = cells.map(cell => `<${tag}>${cell}</${tag}>`).join('');
            
            if (inHeader && i === 0) {
                tableHtml += `<thead><tr>${rowHtml}</tr></thead><tbody>`;
            } else {
                tableHtml += `<tr>${rowHtml}</tr>`;
            }
        }
        
        tableHtml += '</tbody></table>';
        return tableHtml;
    }
    
    static processInlineElements(text) {
        return text
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/__(.*?)__/g, '<strong>$1</strong>')
            .replace(/\*(.*?)\*/g, '<em>$1</em>')
            .replace(/_(.*?)_/g, '<em>$1</em>')
            .replace(/~~(.*?)~~/g, '<del>$1</del>')
            .replace(/!\[([^\]]+)\]\(([^)]+)\)/g, '<img src="$2" alt="$1">')
            .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2">$1</a>');
    }
    
    static cleanupAndFormat(text) {
        let html = text;
        
        // æ¸…ç†ç©ºæ®µè½
        html = html.replace(/<p><\/p>/g, '');
        
        // ç¡®ä¿åˆç†çš„é—´è·
        html = html.replace(/(<\/?(h[1-6]|p|ul|ol|blockquote|table)[^>]*>)/g, '\n$1\n');
        html = html.replace(/\n{3,}/g, '\n\n');
        
        return html.trim();
    }
}

      // åº”ç”¨çŠ¶æ€ç®¡ç†
      class AppState {
        constructor() {
          this.currentProgress = 0;
          this.eventSource = null;
          this.currentFile = null;
          this.currentTaskId = null;
          this.stages = {
            upload: { weight: 10, required: true },
            transcribe: { weight: 40, required: true },
            summary: { weight: 25, optional: true },
            keypoints: { weight: 15, optional: true },
            terms: { weight: 10, optional: true }
          };
        }
        
        reset() {
          this.currentProgress = 0;
          this.currentTaskId = null;
          if (this.eventSource) {
            this.eventSource.close();
            this.eventSource = null;
          }
        }
      }

      // UIç®¡ç†å™¨
      class UIManager {
        constructor() {
          this.appState = new AppState();
          this.initializeEventListeners();
          this.updateCurrentTime();
        }
        
        initializeEventListeners() {
          // é€‰é¡¹å¡åˆ‡æ¢
          document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
              const tabId = tab.getAttribute('data-tab');
              this.switchTab(tabId);
            });
          });
          
          // æ–‡ä»¶ä¸Šä¼ ç›¸å…³
          const dropArea = document.getElementById('drop-area');
          const fileInput = document.getElementById('file-input');
          
          ['dragenter', 'dragover'].forEach(evt => {
            dropArea.addEventListener(evt, (e) => {
              e.preventDefault();
              dropArea.classList.add('dragover');
            });
          });
          
          ['dragleave', 'drop'].forEach(evt => {
            dropArea.addEventListener(evt, (e) => {
              e.preventDefault();
              dropArea.classList.remove('dragover');
            });
          });
          
          dropArea.addEventListener('drop', (e) => {
            e.preventDefault();
            if (e.dataTransfer.files && e.dataTransfer.files.length) {
              fileInput.files = e.dataTransfer.files;
              this.handleFileSelect();
            }
          });
          
          dropArea.addEventListener('click', () => fileInput.click());
          fileInput.addEventListener('change', () => this.handleFileSelect());
          
          // é€‰é¡¹åˆ‡æ¢ - å®Œæ•´è½¬å½•ä¸å¯å–æ¶ˆ
          document.querySelectorAll('.option-toggle').forEach(toggle => {
            if (!toggle.classList.contains('required')) {
              toggle.addEventListener('click', () => {
                toggle.classList.toggle('active');
                this.updateSelectedOptions();
              });
            }
          });
          
          // æäº¤æŒ‰é’®
          document.getElementById('submit-btn').addEventListener('click', () => this.handleSubmit());
        }
        
        switchTab(tabId) {
          // æ›´æ–°æ´»åŠ¨é€‰é¡¹å¡
          document.querySelectorAll('.tab').forEach(tab => {
            tab.classList.remove('active');
          });
          document.querySelector(`.tab[data-tab="${tabId}"]`).classList.add('active');
          
          // æ˜¾ç¤ºå¯¹åº”å†…å®¹
          document.querySelectorAll('.tab-pane').forEach(pane => {
            pane.classList.remove('active');
          });
          document.getElementById(`${tabId}-tab`).classList.add('active');
        }
        
        handleFileSelect() {
          const fileInput = document.getElementById('file-input');
          const fileInfo = document.getElementById('file-info');
          const fileName = document.getElementById('file-name');
          const fileSize = document.getElementById('file-size');
          const currentFile = document.getElementById('current-file');
          
          if (fileInput.files && fileInput.files.length) {
            const file = fileInput.files[0];
            // é‡è¦ï¼šæ¯æ¬¡é€‰æ‹©æ–‡ä»¶æ—¶éƒ½æ›´æ–°å½“å‰æ–‡ä»¶
            this.appState.currentFile = file;
            
            fileName.textContent = file.name;
            fileSize.textContent = this.formatFileSize(file.size);
            currentFile.textContent = file.name;
            
            fileInfo.classList.remove('hidden');
            
            // é‡è¦ï¼šå½“é€‰æ‹©æ–°æ–‡ä»¶æ—¶ï¼Œé‡ç½®æ‰€æœ‰çŠ¶æ€
            this.resetUI();
          } else {
            fileInfo.classList.add('hidden');
            currentFile.textContent = 'æœªé€‰æ‹©æ–‡ä»¶';
            this.appState.currentFile = null;
          }
        }
        
        formatFileSize(bytes) {
          if (bytes === 0) return '0 Bytes';
          const k = 1024;
          const sizes = ['Bytes', 'KB', 'MB', 'GB'];
          const i = Math.floor(Math.log(bytes) / Math.log(k));
          return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        updateSelectedOptions() {
          // è¿™é‡Œå¯ä»¥æ·»åŠ é€»è¾‘æ¥æ›´æ–°ä¾§è¾¹æ æ˜¾ç¤ºçš„é€‰æ‹©é¡¹
        }
        
        updateCurrentTime() {
          const now = new Date();
          const timeString = now.toTimeString().split(' ')[0];
          document.getElementById('current-time').textContent = timeString;
        }
        
        addLogEntry(message, type = 'info') {
          const logContainer = document.getElementById('process-log');
          const logEntry = document.createElement('div');
          logEntry.className = `log-entry log-${type}`;
          
          const now = new Date();
          const timeString = now.toTimeString().split(' ')[0];
          
          logEntry.innerHTML = `
            <div class="log-time">${timeString}</div>
            <div class="log-message">${message}</div>
          `;
          
          logContainer.appendChild(logEntry);
          logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        setStageStatus(stage, status) {
          const stageElement = document.getElementById(`status-${stage}`);
          if (!stageElement) return;
          
          // ç§»é™¤æ‰€æœ‰çŠ¶æ€ç±»
          stageElement.classList.remove('pending', 'active', 'done', 'error');
          
          // æ ¹æ®çŠ¶æ€æ·»åŠ ç±»
          if (status === 'pending') {
            stageElement.classList.add('pending');
          } else if (status === 'started' || status === 'active') {
            stageElement.classList.add('active');
          } else if (status === 'done') {
            stageElement.classList.add('done');
          } else if (status === 'error') {
            stageElement.classList.add('error');
          }
        }
        
        updateProgress(percent) {
          document.getElementById('sidebar-progress-bar').style.width = `${percent}%`;
          document.getElementById('progress-text').textContent = `${percent}%`;
        }
        
        updateTranscriptionProgress(percent) {
          // è½¬å½•è¿›åº¦æ›´æ–°
          this.addLogEntry(`è½¬å½•è¿›åº¦: ${percent}%`, 'info');
        }
        
        makeDownloadButton(filename, text, label) {
          const a = document.createElement('a');
          const blob = new Blob([text], {type: 'text/markdown;charset=utf-8'});
          a.href = URL.createObjectURL(blob);
          a.download = filename;
          a.className = 'download-btn';
          
          const icon = document.createElement('span');
          icon.innerHTML = 'ğŸ“¥';
          a.appendChild(icon);
          
          const txt = document.createElement('span');
          txt.textContent = label;
          a.appendChild(txt);
          
          return a;
        }
        
        // ä¿®æ”¹ï¼šä½¿ç”¨Typoraæ ·å¼æ¸²æŸ“Markdown
        renderMarkdown(content, elementId) {
          const element = document.getElementById(elementId);
          if (element && content) {
            element.innerHTML = TyporaRenderer.render(content);
            element.classList.add('typora-content');
          }
        }
        
        async handleSubmit() {
          // é‡è¦ï¼šæ¯æ¬¡æäº¤æ—¶éƒ½é‡æ–°è·å–æ–‡ä»¶è¾“å…¥
          const fileInput = document.getElementById('file-input');
          if (!fileInput.files || !fileInput.files.length) {
            alert('è¯·å…ˆé€‰æ‹©éŸ³é¢‘æ–‡ä»¶');
            return;
          }
          
          // é‡è¦ï¼šç¡®ä¿ä½¿ç”¨æœ€æ–°çš„æ–‡ä»¶
          const currentFile = fileInput.files[0];
          if (!currentFile) {
            alert('æ–‡ä»¶é€‰æ‹©æ— æ•ˆï¼Œè¯·é‡æ–°é€‰æ‹©');
            return;
          }
          
          const submitBtn = document.getElementById('submit-btn');
          submitBtn.disabled = true;
          submitBtn.textContent = 'å¤„ç†ä¸­...';
          
          // é‡ç½®UIçŠ¶æ€
          this.resetUI();
          
          // åˆ‡æ¢åˆ°å¤„ç†è¿‡ç¨‹é€‰é¡¹å¡
          this.switchTab('process');
          
          // æ·»åŠ å¼€å§‹å¤„ç†æ—¥å¿—
          this.addLogEntry('å¼€å§‹å¤„ç†éŸ³é¢‘æ–‡ä»¶...', 'info');
          
          try {
            // åˆ›å»ºFormDataå¯¹è±¡
            const formData = new FormData();
            formData.append('file', currentFile);
            formData.append('attendees', document.getElementById('attendees').value || '');
            formData.append('meeting_topic', document.getElementById('meeting-topic').value || '');
            formData.append('generate_summary', document.getElementById('toggle-summary').classList.contains('active'));
            formData.append('generate_minutes', true); // å®Œæ•´è½¬å½•å§‹ç»ˆä¸ºtrue
            formData.append('generate_keypoints', document.getElementById('toggle-keypoints').classList.contains('active'));
            formData.append('generate_terms', document.getElementById('toggle-terms').classList.contains('active'));
            
            // å‘é€è¯·æ±‚åˆ°åç«¯
            const response = await fetch('/api/process', {
              method: 'POST',
              body: formData
            });
            
            if (!response.ok) {
              const errorData = await response.json();
              throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            this.appState.currentTaskId = data.task_id;
            
            this.addLogEntry(`ä»»åŠ¡å·²åˆ›å»ºï¼ŒID: ${data.task_id}`, 'success');
            
            // è¿æ¥åˆ°SSEäº‹ä»¶æµ
            this.connectToEventStream(data.task_id);
            
          } catch (error) {
            this.addLogEntry(`å¤„ç†å¤±è´¥: ${error.message}`, 'error');
            submitBtn.disabled = false;
            submitBtn.textContent = 'å¼€å§‹å¤„ç†';
          }
        }
        
        connectToEventStream(taskId) {
          // å…³é—­ç°æœ‰çš„è¿æ¥
          if (this.appState.eventSource) {
            this.eventSource.close();
          }
          
          // åˆ›å»ºæ–°çš„EventSourceè¿æ¥
          this.appState.eventSource = new EventSource(`/api/events/${taskId}`);
          
          this.appState.eventSource.onmessage = (event) => {
            try {
              const data = JSON.parse(event.data);
              this.handleEventData(data);
            } catch (error) {
              console.error('è§£æäº‹ä»¶æ•°æ®å¤±è´¥:', error);
              this.addLogEntry('æ¥æ”¶æ•°æ®æ ¼å¼é”™è¯¯', 'error');
            }
          };
          
          this.appState.eventSource.onerror = (error) => {
            console.error('SSEè¿æ¥é”™è¯¯:', error);
            this.addLogEntry('è¿æ¥é”™è¯¯ï¼Œå°è¯•é‡æ–°è¿æ¥...', 'error');
            
            // å°è¯•é‡æ–°è¿æ¥
            setTimeout(() => {
              if (this.appState.currentTaskId) {
                this.connectToEventStream(this.appState.currentTaskId);
              }
            }, 5000);
          };
        }
        
        handleEventData(data) {
          // å¤„ç†è½¬å½•è¿›åº¦æ›´æ–°
          if (data.stage === 'transcribe' && data.progress !== undefined) {
            this.updateTranscriptionProgress(data.progress);
            return;
          }
          
          // å¤„ç†é˜¶æ®µçŠ¶æ€æ›´æ–°
          if (data.stage && data.status) {
            const stage = data.stage === 'key_points' ? 'keypoints' : data.stage;
            
            this.setStageStatus(stage, data.status);
            
            // æ›´æ–°æ—¥å¿—
            const stageNames = {
              'upload': 'æ–‡ä»¶ä¸Šä¼ ',
              'transcribe': 'è¯­éŸ³è½¬å½•',
              'summary': 'ç”Ÿæˆæ‘˜è¦',
              'keypoints': 'æå–è¦ç‚¹',
              'terms': 'æœ¯è¯­è§£é‡Š'
            };
            
            const statusText = data.status === 'pending' ? 'å‡†å¤‡ä¸­' :
                              data.status === 'started' ? 'å¼€å§‹' : 
                              data.status === 'active' ? 'å¤„ç†ä¸­' :
                              data.status === 'done' ? 'å®Œæˆ' : 
                              data.status === 'error' ? 'å¤±è´¥' : data.status;
            
            this.addLogEntry(`${stageNames[stage] || stage} ${statusText}`, 
                            data.status === 'error' ? 'error' : 
                            data.status === 'done' ? 'success' : 
                            data.status === 'pending' || data.status === 'active' ? 'info' : 'info');
            
            // æ›´æ–°è¿›åº¦
            if (data.status === 'started' || data.status === 'active') {
              this.appState.currentProgress += this.appState.stages[stage].weight / 2;
            } else if (data.status === 'done') {
              this.appState.currentProgress += this.appState.stages[stage].weight / 2;
            }
            this.updateProgress(this.appState.currentProgress);
            
            // æ›´æ–°ç»“æœå†…å®¹
            if (data.status === 'done') {
              switch(stage) {
                case 'transcribe':
                  if (data.transcript) {
                    this.renderMarkdown(data.transcript, 'transcript-content');
                    document.getElementById('transcript-status').textContent = 'å·²å®Œæˆ';
                  }
                  break;
                case 'summary':
                  if (data.summary) {
                    this.renderMarkdown(data.summary, 'summary-content');
                    document.getElementById('summary-status').textContent = 'å·²å®Œæˆ';
                  }
                  break;
                case 'keypoints':
                  if (data.key_points) {
                    const content = Array.isArray(data.key_points) ? 
                      data.key_points.map(k => `- ${k}`).join('\n') : 
                      String(data.key_points);
                    this.renderMarkdown(content, 'keypoints-content');
                    document.getElementById('keypoints-status').textContent = 'å·²å®Œæˆ';
                  }
                  break;
                case 'terms':
                  if (data.technical_terms) {
                    const content = Array.isArray(data.technical_terms) ? 
                      data.technical_terms.map(t => `- ${t}`).join('\n') : 
                      String(data.technical_terms);
                    this.renderMarkdown(content, 'terms-content');
                    document.getElementById('terms-status').textContent = 'å·²å®Œæˆ';
                  }
                  break;
              }
            }
          }
          
          // å¤„ç†å®Œæˆäº‹ä»¶
          if (data.event === 'done') {
            this.addLogEntry('æ‰€æœ‰å¤„ç†æ­¥éª¤å·²å®Œæˆ', 'success');
            this.updateProgress(100);
            
            // åˆ›å»ºä¸‹è½½æŒ‰é’®
            const results = data.results || {};
            this.createDownloadButtons(results);
            
            // åˆ‡æ¢åˆ°è¾“å‡ºé€‰é¡¹å¡
            this.switchTab('output');
            
            // é‡ç½®æäº¤æŒ‰é’®
            const submitBtn = document.getElementById('submit-btn');
            submitBtn.disabled = false;
            submitBtn.textContent = 'å¼€å§‹å¤„ç†';
            
            // å…³é—­äº‹ä»¶æµ
            if (this.appState.eventSource) {
              this.appState.eventSource.close();
              this.appState.eventSource = null;
            }
          }
        }
        
        createDownloadButtons(results) {
          // æ¸…ç©ºç°æœ‰çš„ä¸‹è½½æŒ‰é’®
          document.getElementById('transcript-downloads').innerHTML = '';
          document.getElementById('summary-downloads').innerHTML = '';
          document.getElementById('keypoints-downloads').innerHTML = '';
          document.getElementById('terms-downloads').innerHTML = '';
          
          // åˆ›å»ºä¸‹è½½æŒ‰é’®
          if (results.transcript) {
            document.getElementById('transcript-downloads').appendChild(
              this.makeDownloadButton('transcript.md', `# ä¼šè®®è½¬å½•\n\n${results.transcript}`, 'è½¬å½•.md')
            );
          }
          
          if (results.summary) {
            document.getElementById('summary-downloads').appendChild(
              this.makeDownloadButton('summary.md', `# ä¼šè®®æ‘˜è¦\n\n${results.summary}`, 'æ‘˜è¦.md')
            );
          }
          
          if (results.key_points) {
            const content = Array.isArray(results.key_points) ? 
              results.key_points.map(k => `- ${k}`).join('\n') : 
              String(results.key_points);
            document.getElementById('keypoints-downloads').appendChild(
              this.makeDownloadButton('key_points.md', `# å…³é”®è¦ç‚¹\n\n${content}`, 'è¦ç‚¹.md')
            );
          }
          
          if (results.technical_terms) {
            const content = Array.isArray(results.technical_terms) ? 
              results.technical_terms.map(t => `- ${t}`).join('\n') : 
              String(results.technical_terms);
            document.getElementById('terms-downloads').appendChild(
              this.makeDownloadButton('terms.md', `# ä¸“ä¸šæœ¯è¯­\n\n${content}`, 'æœ¯è¯­.md')
            );
          }
        }
        
        resetUI() {
          // é‡ç½®åº”ç”¨çŠ¶æ€
          this.appState.reset();
          
          // é‡ç½®è¿›åº¦æ˜¾ç¤º
          this.updateProgress(0);
          
          // é‡ç½®é˜¶æ®µçŠ¶æ€
          Object.keys(this.appState.stages).forEach(stage => {
            this.setStageStatus(stage, '');
          });
          
          // æ¸…ç©ºæ—¥å¿—
          document.getElementById('process-log').innerHTML = '';
          this.addLogEntry('ç­‰å¾…å¼€å§‹å¤„ç†...', 'info');
          
          // é‡ç½®è¾“å‡ºåŒºåŸŸ
          document.getElementById('transcript-content').innerHTML = 'ï¼ˆç­‰å¾…å¤„ç†ç»“æœï¼‰';
          document.getElementById('summary-content').innerHTML = 'ï¼ˆç­‰å¾…å¤„ç†ç»“æœï¼‰';
          document.getElementById('keypoints-content').innerHTML = 'ï¼ˆå¦‚é€‰æ‹©"å…³é”®è¦ç‚¹"é€‰é¡¹ï¼Œæ­¤å¤„å°†æ˜¾ç¤ºæå–ç»“æœï¼‰';
          document.getElementById('terms-content').innerHTML = 'ï¼ˆå¦‚é€‰æ‹©"æœ¯è¯­è§£é‡Š"é€‰é¡¹ï¼Œæ­¤å¤„å°†æ˜¾ç¤ºè§£æç»“æœï¼‰';
          
          document.getElementById('transcript-status').textContent = 'ç­‰å¾…å¤„ç†';
          document.getElementById('summary-status').textContent = 'ç­‰å¾…å¤„ç†';
          document.getElementById('keypoints-status').textContent = 'æœªé€‰æ‹©æ­¤é€‰é¡¹';
          document.getElementById('terms-status').textContent = 'æœªé€‰æ‹©æ­¤é€‰é¡¹';
          
          // æ¸…ç©ºä¸‹è½½æŒ‰é’®
          document.getElementById('transcript-downloads').innerHTML = '';
          document.getElementById('summary-downloads').innerHTML = '';
          document.getElementById('keypoints-downloads').innerHTML = '';
          document.getElementById('terms-downloads').innerHTML = '';
        }
      }

      // åˆå§‹åŒ–åº”ç”¨
      document.addEventListener('DOMContentLoaded', () => {
        const uiManager = new UIManager();
        
        // æ¯ç§’æ›´æ–°ä¸€æ¬¡æ—¶é—´
        setInterval(() => {
          uiManager.updateCurrentTime();
        }, 1000);
      });
    </script>
  </body>
</html>